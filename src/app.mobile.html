<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!-- Capacitor build initialization - must be first -->
    <script>
      // Global polyfill for Node.js compatibility
      if (typeof global === "undefined") {
        window.global = window;
      }

      // Capacitor build flag
      window.__CAPACITOR_BUILD__ = true;

      // SvelteKit data fetch polyfill for static builds
      // In static builds, there's no server to handle /__data.json requests
      // This intercepts those requests and returns empty data to prevent 500 errors
      (function () {
        var originalFetch = window.fetch;
        window.fetch = function (input, init) {
          var url =
            typeof input === "string"
              ? input
              : input instanceof Request
                ? input.url
                : String(input);

          // Intercept SvelteKit data requests that would fail in static builds
          if (url.indexOf("__data.json") !== -1) {
            console.log("[Capacitor] Intercepting data request:", url);
            // Return empty data response that SvelteKit can handle
            var emptyResponse =
              JSON.stringify({
                type: "data",
                nodes: [null, null, null, null, null, null, null, null],
              }) + "\n";
            return Promise.resolve(
              new Response(emptyResponse, {
                status: 200,
                headers: { "Content-Type": "application/json" },
              }),
            );
          }

          return originalFetch.apply(this, arguments);
        };
      })();
    </script>

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="/apple-touch-icon-57x57.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="/apple-touch-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="/apple-touch-icon-76x76.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="/apple-touch-icon-114x114.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="/apple-touch-icon-120x120.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="/apple-touch-icon-144x144.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="/apple-touch-icon-152x152.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/apple-touch-icon-180x180.png"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />

    <!-- Preload critical fonts for improved LCP -->
    <link
      rel="preload"
      href="/fonts/mulish/Mulish-VariableFont_wght.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="/fonts/Fira_Sans/FiraSans-Bold.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />

    %sveltekit.head%
  </head>
  <body data-sveltekit-preload-data="hover">
    <div style="display: contents">%sveltekit.body%</div>
  </body>
</html>
